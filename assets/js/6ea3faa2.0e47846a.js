"use strict";(self.webpackChunkfigment_documentation=self.webpackChunkfigment_documentation||[]).push([[8232],{2750:(e,t,a)=>{a.d(t,{ZP:()=>c});var n=a(7462),r=(a(7294),a(3905)),o=a(5488),l=a(5162),i=a(7643);const s={toc:[{value:"Authentication",id:"authentication",level:3}]};function c(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h3",{id:"authentication"},"Authentication"),(0,r.kt)("div",null,"API calls require authentication with API key via ",(0,r.kt)("code",null,"Authorization")," ","request header or ",(0,r.kt)("code",null,"URL")," property. Calls are made to the"," ",(0,r.kt)("strong",null,a.network," ",a.service)," ","endpoint, hosted at"," ",(0,r.kt)("code",null,a.url.replace(/(apikey\/[^\/]+\/*){1}/,"")),(0,r.kt)("br",null),(0,r.kt)("br",null)),"Here's some boilerplate to get you started."," ",(0,r.kt)(o.Z,{mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"js-header",label:"Fetch with Header",mdxType:"TabItem"},(0,r.kt)(i.Z,{language:"js",mdxType:"CodeBlock"},'fetch("'+a.url.replace(/(apikey\/[^\/]+\/*){1}/,"")+'", {\n    method: \'POST\', // can also be \'GET\', \'PUT\' or any appropriate method\n    headers: {\n        "Authorization" : "<api_key>",\n        "Content-Type": "application/json" // if method is \'POST\'\n    },\n    body: JSON.stringify({\n      // JSON Payload\n    })\n})')),(0,r.kt)(l.Z,{value:"js-parameter",label:"Fetch with Parameter",mdxType:"TabItem"},(0,r.kt)(i.Z,{language:"js",mdxType:"CodeBlock"},'fetch("'+a.url.replace(/(apikey\/[^\/]+\/*){1}/,"apikey/<api_key>/")+"\", {\n    method: 'POST', // can also be 'GET', 'PUT' or any appropriate method\n    headers: {\n        \"Content-Type\": \"application/json\" // if method is 'POST'\n    },\n    body: JSON.stringify({\n      // JSON Payload\n    })\n})")),(0,r.kt)(l.Z,{value:"curl-header",label:"CURL with Header",mdxType:"TabItem"},(0,r.kt)(i.Z,{language:"bash",mdxType:"CodeBlock"},"curl -X POST '"+a.url.replace(/(apikey\/[^\/]+\/*){1}/,"")+"' \\\n--header 'Content-Type: application/json' \\\n--header 'Authorization: <api_key>' \\\n--data '{\n  // JSON Payload\n}'")),(0,r.kt)(l.Z,{value:"curl-parameter",label:"CURL with Parameter",mdxType:"TabItem"},(0,r.kt)(i.Z,{language:"bash",mdxType:"CodeBlock"},"curl -X POST '"+a.url.replace(/(apikey\/[^\/]+\/*){1}/,"apikey/<api_key>/")+"' \\\n--header 'Content-Type: application/json' \\\n--data '{\n  // JSON Payload\n}'"))))}c.isMDXComponent=!0},3976:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(7294),r=a(6775);function o(e){let{network:t,networks:a,methods:o,service:l}=e;const i=(0,r.TH)(),s=(0,r.k6)();return n.createElement("div",null,n.createElement("label",null,"Change Network: "),n.createElement("select",{className:"custom-select",defaultValue:t,onChange:e=>{s.push(i.pathname.replace(/\/[^\/]+$/,"/"+e.target.value))}},a.map((e=>n.createElement("option",{key:e.value+"--n-option",value:e.value},e.label)))),n.createElement("label",null," Jump to: "),n.createElement("select",{className:"custom-select",defaultValue:i.hash.replace("#","")||"",onChange:e=>{s.push("#"+e.target.value)}},o.map((e=>n.createElement("option",{key:e.name+"--m-hash",value:e.name.toLowerCase()},e.name)))))}},4777:(e,t,a)=>{a.d(t,{S:()=>j});var n=a(7462),r=a(7294),o=a(7748),l=a(460),i=a.n(l),s=a(3746),c=a(6412);const d={Header:"Header_JfB9",blinker:"blinker_fwXa",Actions:"Actions_tjtQ",Container:"Container_SXTI",Editor:"Editor_gTle",Line:"Line_F8ZC",Code:"Code_xj0a"};function u(e){let{children:t="",header:a,actions:o,disabled:l=!1,status:u,onValueChange:m}=e;const h=(0,c.p)(),y=(0,r.useRef)(null);(0,r.useEffect)((()=>{var e;const t=null==(e=y.current)?void 0:e.querySelector("textarea"),a=e=>{const t=e.target;t.style.width=t.scrollWidth+"px"};return t.addEventListener("input",a),()=>t.removeEventListener("input",a)}),[]);return r.createElement("div",{ref:y},r.createElement(p,{actions:o,status:u},a),r.createElement("div",{className:d.Container},r.createElement(i(),{value:t,onValueChange:m,highlight:function(e){return void 0===e&&(e=""),r.createElement(s.ZP,(0,n.Z)({},s.lG,{theme:h,code:e,language:"json"}),(e=>{let{className:t,style:a,tokens:o,getLineProps:l,getTokenProps:i}=e;return r.createElement("div",{className:d.Code},o.map(((e,t)=>r.createElement("div",(0,n.Z)({key:t},l({line:e,key:t}),{className:d.Line}),r.createElement("span",{className:d.LineContent},e.map(((e,t)=>r.createElement("span",(0,n.Z)({key:t},i({token:e,key:t}))))))))))}))},disabled:l,ignoreTabKey:!0,padding:10,style:{...h.plain,overflow:"auto"},className:d.Editor})))}function p(e){let{children:t,actions:a=[],status:n}=e;return r.createElement("div",{className:d.Header,"data-status":n},r.createElement("span",null,t),r.createElement("span",{className:d.Actions},a.map(((e,t)=>{let{title:a,onClick:n,Component:o=a}=e;return r.createElement("button",{className:d.HeaderButton,key:t+":"+a,title:a,onClick:n},o)}))))}var m=a(195);const h="overlayHeaderButton_IGf5";const y=function(e,t){const a=(0,r.useRef)(!1),n={error:void 0,data:void 0,loading:!1},[o,l]=(0,r.useReducer)(((e,t)=>{switch(t.type){case"loading":return{...n,loading:!0};case"fetched":return{...n,data:t.payload,loading:!1};case"error":return{...n,error:t.payload,loading:!1};default:return e}}),n);return{...o,fetchData:async function(n,r){void 0===r&&(r={}),l({type:"loading"});try{const o=await fetch(e+(n||""),{...t,...r});if(!o.ok){let e,t,a;try{a=JSON.parse(await o.text()),e=await o.json(),t=JSON.stringify(e,null,2)}catch{}throw new Error(JSON.stringify(t,null,2)||JSON.stringify(a,null,2)||o.statusText)}const i=await o.json();if(a.current)return;return l({type:"fetched",payload:i}),i}catch(o){if(a.current)return;return l({type:"error",payload:o.message}),null}}}};var g,f=a(7643),w=a(4672);function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},k.apply(this,arguments)}const v=e=>{let{title:t,titleId:a,...n}=e;return r.createElement("svg",k({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":a},n),t?r.createElement("title",{id:a},t):null,g||(g=r.createElement("path",{d:"m10 16.5 6-4.5-6-4.5v9ZM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2Zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8Z",fill:"#0C3F5C"})))};var b;function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},E.apply(this,arguments)}const R=e=>{let{title:t,titleId:a,...n}=e;return r.createElement("svg",E({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":a},n),t?r.createElement("title",{id:a},t):null,b||(b=r.createElement("path",{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35Z",fill:"#0C3F5C"})))};function T(e){let{req:t,res:a,interactive:n}=e;const[o,l]=(0,r.useState)(A(t.body)),[i,s]=(0,r.useState)(t.query),[c,d]=(0,r.useState)(N(a.body)),p="string"==typeof t.body&&0==t.body.indexOf("query"),{data:g,error:k,loading:b,fetchData:E}=y(t.url,{method:t.method,headers:{"Content-Type":p?"application/graphql":"application/json"},body:A(t.body)}),[T,C]=(0,r.useState)(null);(0,r.useEffect)((()=>{b?C("LOADING"):k||null!=g&&g.error?C("ERROR"):g&&C("SUCCESS")}),[g,k,b]);const x=[n?{title:"Run request",onClick:async()=>{const e=await E(i,{body:o});e&&d(N(e))},Component:r.createElement(r.Fragment,null,r.createElement(v,null)," Run")}:null,{title:"Copy",onClick:()=>(0,m.Z)(o),Component:r.createElement(w.Z,{code:"",className:h})},n?{title:"Reset",onClick:()=>{C(null),s(t.query),l(A(t.body)),d(N(a.body))},Component:r.createElement(R,null)}:null].filter((e=>!!e));return r.createElement(r.Fragment,null,r.createElement(u,{header:"GET"===t.method?"Request Query "+(n?"(try it)":""):"Request Body "+(n?"(try it)":""),actions:x,disabled:!n,onValueChange:e=>{n&&("GET"===t.method?s(e):"POST"===t.method&&l(e))}},"GET"===t.method?i:o),r.createElement(f.Z,{title:T?"Response":"Example Response",language:"json"},k?""+k:c))}function N(e){return JSON.stringify(e,null,2)}function A(e){return"string"==typeof e?e:JSON.stringify(e,null,2)}var C=a(1099),x=a(3905);const S={toc:[]};function P(e){let{components:t,...a}=e;return(0,x.kt)("wrapper",(0,n.Z)({},S,a,{components:t,mdxType:"MDXLayout"}),(0,x.kt)("details",null,(0,x.kt)("summary",null,a.title),(0,x.kt)(C.D,{mdxType:"ReactMarkdown"},a.details)))}function Z(e){let{content:t=""}=e;const[a,...n]=t.trim().split(/\n+/),o=n.join("\n");return r.createElement("div",null,r.createElement(C.D,null,a),r.createElement(P,{title:"View specification",details:o}))}P.isMDXComponent=!0;const _="heading_REER";var O=a(9960);function I(e){let{name:t,content:a="",interactive:n,request:o,response:l}=e;return["Rewards (by epoch)","Rewards (daily)"].includes(t)&&(o.body={...o.body,start_time:new Date(Date.now()-("Rewards (by epoch)"===t?1728e5:864e5)).toISOString().split("T")[0],end_time:(new Date).toISOString().split("T")[0]}),r.createElement(r.Fragment,null,r.createElement("h2",{id:t.toLowerCase(),className:_,"data-method":o.method},r.createElement(O.Z,{to:"#"+t.toLowerCase()},t)),r.createElement(Z,{content:a}),r.createElement(T,{req:o,res:l,interactive:n}),r.createElement("hr",null))}function j(e){let{network:t,methods:a}=e;return r.createElement(r.Fragment,null,r.createElement("h3",null,"Available Methods"),a.map(((e,a)=>r.createElement(I,(0,n.Z)({key:t+a},e)))),r.createElement(o.Z,null))}},5709:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>d,toc:()=>p});var n=a(7462),r=(a(7294),a(3905)),o=a(4777),l=a(3976),i=a(2750);const s={title:"NEAR",sidebar_position:0,pagination_prev:null,pagination_next:null,collapsed:!0,collapsible:!0,description:"Rewards API - NEAR",image:"img/logo.svg",keywords:["Rewards API","NEAR"]},c="Rewards API - NEAR",d={unversionedId:"api-reference/rewards-api/near",id:"api-reference/rewards-api/near",title:"NEAR",description:"Rewards API - NEAR",source:"@site/docs/api-reference/rewards-api/near.mdx",sourceDirName:"api-reference/rewards-api",slug:"/api-reference/rewards-api/near",permalink:"/api-reference/rewards-api/near",draft:!1,tags:[],version:"current",sidebarPosition:0,frontMatter:{title:"NEAR",sidebar_position:0,pagination_prev:null,pagination_next:null,collapsed:!0,collapsible:!0,description:"Rewards API - NEAR",image:"img/logo.svg",keywords:["Rewards API","NEAR"]},sidebar:"docsSidebar"},u={},p=[],m={toc:p};function h(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"rewards-api---near"},"Rewards API - NEAR"),(0,r.kt)(l.Z,{service:"rewards-api",methods:[{name:"Rewards (by epoch)"}],networks:[{label:"Ethereum",value:"ethereum"},{label:"NEAR",value:"near"},{label:"Polkadot",value:"polkadot"},{label:"Solana",value:"solana"}],network:"near",mdxType:"ApiReferenceNav"}),(0,r.kt)(i.ZP,{url:"https://near-rewards.datahub.figment.io/apikey/9513550c6ba06b65633a2b6ce8c5bb01/rewards",network:"Near",service:"Rewards API",mdxType:"MakingCalls"}),(0,r.kt)(o.S,{methods:[{name:"Rewards (by epoch)",content:"Returns net delegator rewards (aka post on-chain validator commission) grouped by epoch.\n\n### Parameters\n\n- `network` => `near`\n- `chain_id` => `mainnet`  \n- `accounts` takes in an array of Stash Account public addresses  \n- `start_time` and `end_time` are ISO 8601 timestamps in UTC. If the start of an epoch falls into the requested date range it will be included (even if it doesn't end inside the date range)  \n- `grouping` => `epoch` will return rewards grouped by **eras**.\n\n### Response\n\n- `network` and `chain_id` are the same as the request  \n- `accounts` returns an array of Stash Account public addresses  \n- `validator` returns the validator that tokens were staked to  \n- `time` and `epoch` reference the start of the daily or epoch bucket  \n- `rewards` is an array of objects with four components: `text`, `numeric` , `exp` and `currency`. The formula to compute the final rewards in the `currency` unit is `numeric * 10^-exp`(`text` is the string version of this).)\n\n### Limitations\n\n- The API returns rewards for Figment validators only  \n- The API returns rewards for the last 30 days  \n- Data is available approximately an hour after the end of the day or epoch. When requesting daily for the current day, the data will be available but obviously partially complete as the day progresses.",request:{method:"POST",header:[],body:{network:"near",chain_id:"mainnet",accounts:["figment.near"],start_time:"2022-07-01",end_time:"2022-09-30",grouping:"epoch"},url:"https://near-rewards.datahub.figment.io/apikey/9513550c6ba06b65633a2b6ce8c5bb01/rewards"},interactive:!0,response:{name:"Rewards (by epoch)",status:"OK",code:200,body:[{accounts:["figment.near"],chain_id:"mainnet",rewards:[{text:"180.332217192742628015506446 NEAR",currency:"NEAR",numeric:18033221719274262e10,exp:24}],epoch:"74879490",network:"near",validator:"figment.poolv1.near",time:"2022-09-26T04:17:28.831146914Z"},{accounts:["figment.near"],chain_id:"mainnet",rewards:[{text:"181.67471822329716480716324 NEAR",currency:"NEAR",numeric:18167471822329718e10,exp:24}],epoch:"74922690",network:"near",validator:"figment.poolv1.near",time:"2022-09-26T18:49:43.647537689Z"},{accounts:["figment.near"],chain_id:"mainnet",rewards:[{text:"181.326989881237317444456718 NEAR",currency:"NEAR",numeric:18132698988123733e10,exp:24}],epoch:"74965890",network:"near",validator:"figment.poolv1.near",time:"2022-09-27T09:13:39.623125317Z"},{accounts:["figment.near"],chain_id:"mainnet",rewards:[{text:"179.415049936991080040262323 NEAR",currency:"NEAR",numeric:17941504993699107e10,exp:24}],epoch:"75009090",network:"near",validator:"figment.poolv1.near",time:"2022-09-27T23:38:42.777178202Z"},{accounts:["figment.near"],chain_id:"mainnet",rewards:[{text:"179.600557403504278536893009 NEAR",currency:"NEAR",numeric:1796005574035043e11,exp:24}],epoch:"75052290",network:"near",validator:"figment.poolv1.near",time:"2022-09-28T13:45:57.421827054Z"},{accounts:["figment.near"],chain_id:"mainnet",rewards:[{text:"178.461099962757970006478891 NEAR",currency:"NEAR",numeric:17846109996275796e10,exp:24}],epoch:"75095490",network:"near",validator:"figment.poolv1.near",time:"2022-09-29T03:52:48.028301752Z"},{accounts:["figment.near"],chain_id:"mainnet",rewards:[{text:"178.628253818074775588642293 NEAR",currency:"NEAR",numeric:17862825381807477e10,exp:24}],epoch:"75138690",network:"near",validator:"figment.poolv1.near",time:"2022-09-29T19:54:20.913081104Z"}]}}],service:"rewards-api",networks:[{label:"Ethereum",value:"ethereum"},{label:"NEAR",value:"near"},{label:"Polkadot",value:"polkadot"},{label:"Solana",value:"solana"}],network:"near",mdxType:"APIMethods"}))}h.isMDXComponent=!0}}]);